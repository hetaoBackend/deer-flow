# Kubernetes Sandbox Quick Start

A simplified setup guide for getting started with the Kubernetes sandbox provider.

## TL;DR (Recommended)

```bash
# 1. Enable Kubernetes
# Docker Desktop → Settings → Kubernetes → Enable Kubernetes
# OrbStack → Settings → Kubernetes → Enable Kubernetes

# 2. Run the automated setup script (handles everything including path configuration)
cd docker/k8s
./setup.sh

# 3. Start backend
cd ../../backend
make dev
```

The `setup.sh` script automatically:
- Detects your project path and configures volumes
- Pulls the sandbox image
- Deploys all Kubernetes resources
- Offers to configure backend/config.yaml

## Manual Setup

If you prefer manual setup:

```bash
# 1. Enable Kubernetes
# Docker Desktop → Settings → Kubernetes → Enable Kubernetes

# 2. Run setup.sh to auto-configure paths, or skip config prompt:
cd docker/k8s
./setup.sh --skip-config

# 3. Manually configure backend
cat >> ../../backend/config.yaml << EOF
sandbox:
  use: src.community.aio_sandbox:KubernetesSandboxProvider
  image: enterprise-public-cn-beijing.cr.volces.com/vefaas-public/all-in-one-sandbox:latest
  k8s_namespace: deer-flow
  ttl_seconds: 3600
EOF

# 4. Install dependencies and start
cd ../../backend
pip install -e .
make dev

# 5. Test (in another terminal)
cd docker/k8s
./test-concurrent.sh
```

## Setup Script Options

```bash
# Show help
./setup.sh --help

# Run setup (interactive)
./setup.sh

# Skip backend configuration prompt
./setup.sh --skip-config

# Cleanup all Kubernetes resources
./setup.sh --cleanup
```

## Configuration

Minimal `backend/config.yaml` (auto-generated by setup.sh):

```yaml
sandbox:
  use: src.community.aio_sandbox:KubernetesSandboxProvider
  image: enterprise-public-cn-beijing.cr.volces.com/vefaas-public/all-in-one-sandbox:latest
  k8s_namespace: deer-flow
  ttl_seconds: 3600
```

For advanced configuration (resource limits, custom images, etc.), see [README.md](README.md#configuration-reference).

## Quick Verification

```bash
# Check all resources
kubectl get all -n deer-flow

# Watch Pods during testing
kubectl get pods -n deer-flow -w

# Run concurrent test
cd docker/k8s
./test-concurrent.sh
```

## Need Help?

- **Troubleshooting**: See [README.md](README.md#troubleshooting) for common issues
- **Configuration**: See [README.md](README.md#configuration-reference) for advanced options
- **Monitoring**: See [README.md](README.md#monitoring) for monitoring commands
